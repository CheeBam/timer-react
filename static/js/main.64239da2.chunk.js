(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{230:function(e,t,a){e.exports=a.p+"static/media/ring.4d1881e7.svg"},239:function(e,t,a){e.exports=a(529)},527:function(e,t,a){},529:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(54),i=a.n(o),l=a(45),c=a(536),s=a(207),m=a.n(s),u=a(539),d=a(540),f=a(533),p=a(33),g=a.n(p),h=a(229),v=a.n(h),E=a(142),b=a.n(E),O=a(32),y={button:{background:"#fff",color:"#3f51b5",padding:"5px"},mainContainer:{width:"100%",paddingRight:"15px",paddingLeft:"15px",marginRight:"auto",marginLeft:"auto"},mainTabList:{flexGrow:1,backgroundColor:"#02BCD4",width:"100%",color:"#fff"},mainTab:{fontWeight:600,fontSize:"small"},timerClock:{background:"#fff",color:"#3f51b5",fontWeight:900,fontSize:"x-large",padding:"65px 80px 90px",margin:"20px"},taskWrapper:{margin:"10px 0 25px 0",textAlign:"center"},infoCard:{marginTop:20,textAlign:"left"},infoFooter:{justifyContent:"center"},logRow:{background:"#EAF6FF"},logCell:{textAlign:"center",paddingTop:"10px",paddingBottom:"10px",color:"#3f51b5"},chartButtonContainer:{textAlign:"right",marginBottom:30},dialogTitle:{color:"#ff0000"},dialogButton:{color:"#0EBFD7"},infoPreloader:{marginTop:50}},S=a(42),j=a(43),k=a(46),T=a(44),I=a(47),N=a(20),w=a(214),C=a.n(w),D=a(34),x=a.n(D),A=a(208),F=a.n(A),L=function(e){function t(e){var a;Object(S.a)(this,t),(a=Object(k.a)(this,Object(T.a)(t).call(this,e))).state={time:null};var n=e.duration;return a.state={time:N.Duration.fromMillis(n),intervalId:null},a}return Object(I.a)(t,e),Object(j.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.started;this.runner(e)}},{key:"componentDidUpdate",value:function(e){var t=this.props.started;t!==e.started&&this.runner(t)}},{key:"componentWillUnmount",value:function(){var e=this.state.intervalId;clearInterval(e)}},{key:"runner",value:function(e){var t=this,a=this.state.intervalId;if(e){var n=setInterval(function(){t.addSecond()},1e3);this.setState({intervalId:n})}else clearInterval(a),this.setState({time:N.Duration.fromMillis(0)})}},{key:"addSecond",value:function(){var e=this.state.time;this.setState({time:e.plus(N.Duration.fromMillis(1e3))})}},{key:"render",value:function(){var e=this.state.time,t=this.props.classes;return r.a.createElement(F.a,{variant:"round",className:t.timerClock},e.toFormat("hh:mm:ss"))}}]),t}(n.PureComponent);L.defaultProps={duration:0};var _=Object(O.withStyles)(y)(L),M=a(209),B=a.n(M),J=a(213),H=a.n(J),G=a(211),R=a.n(G),W=a(212),K=a.n(W),P=a(210),z=a.n(P),U=Object(O.withStyles)(y)(function(e){var t=e.open,a=e.closeDialog,n=e.classes;return r.a.createElement(B.a,{open:t,onClose:a(),"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(z.a,{id:"alert-dialog-title",disableTypography:!0},r.a.createElement("h2",{className:n.dialogTitle},"Empty task name")),r.a.createElement(R.a,null,r.a.createElement(K.a,{id:"alert-dialog-description"},"You are trying close your task without name, enter the title and try again!")),r.a.createElement(H.a,null,r.a.createElement(x.a,{onClick:a(),className:n.dialogButton,autoFocus:!0},"Close")))}),Y="CREATE_ITEM",$="CREATE_LOG",q="ITEM_SET_NAME",Q="ADD_TO_LOG",V="DELETE_FROM_LOG",X="CLEAR_LOG";var Z=10,ee=15,te=10,ae=90,ne=10,re=50,oe=4,ie=function(){var e=JSON.parse(localStorage.getItem("list")),t=1;return e&&(e.sort(function(e,t){return e.id-t.id}),t=e.pop().id+1),t},le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return Math.floor(Math.random()*(t-e)+e+1)},ce=function(e){for(var t=e.map(function(e){var t=N.DateTime.fromISO(e.start),a=N.DateTime.fromISO(e.end);return{id:e.id,interval:N.Interval.fromDateTimes(t,a),start:t,end:a}}),a=[],n=function(e){var n=0,r=N.DateTime.fromObject({hour:e,minute:0,second:0}),o=N.DateTime.fromObject({hour:e,minute:59,second:59}),i=N.Interval.fromDateTimes(r,o),l=t.filter(function(e){return i.intersection(e.interval)});if(l.length>0){var c=60;l.forEach(function(t){t.end.hour===e&&t.start.hour===e?c=t.end.diff(t.start,["minutes"]).toObject().minutes:t.end.hour===e?c=t.end.minute:t.start.hour===e&&(c=60-t.start.minute),n+=c})}a.push({hour:e,value:n>60?60:n})};;1)n(0);return a},se=function(e){function t(e){var a;Object(S.a)(this,t),(a=Object(k.a)(this,Object(T.a)(t).call(this))).state={name:"",started:!1,duration:0,dialog:!1},a.onChangeName=function(e){var t=a.props.changeName;a.setState({name:e.target.value}),t(e.target.value)},a.onStartClick=function(){var e=a.state.name,t=a.props.createItem;a.setState({started:!0}),t({id:ie(),start:N.DateTime.local().toISO(),name:e,end:null,duration:null})},a.onStopClick=function(){var e=a.state.name,t=a.props,n=t.addToLog,r=t.timer.item;if(e){a.setState({started:!1,name:""});var o=N.DateTime.local();n({id:r.id,name:e,start:r.start,end:o.toISO(),duration:o.diff(N.DateTime.fromISO(r.start),["hours","minutes","seconds"]).toObject()})}else a.openDialog()},a.closeDialog=function(){return function(){a.setState({dialog:!1})}},a.openDialog=function(){a.setState({dialog:!0})},a.renderButton=function(e){var t=a.props.classes;return r.a.createElement(x.a,{className:t.button,variant:"contained",size:"small",onClick:e?a.onStopClick:a.onStartClick},e?"Stop":"Start")};var n=e.timer.item;if(n&&0!==n.id){var o=N.DateTime.fromISO(n.start).diffNow("millisecond");a.state={started:!0,duration:Math.abs(o.valueOf()),name:n.name,dialog:!1}}return a}return Object(I.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this.state,t=e.started,a=e.duration,n=e.name,o=e.dialog,i=this.props.classes;return r.a.createElement(g.a,{container:!0,spacing:8,justify:"center",className:i.taskWrapper},r.a.createElement(g.a,{item:!0,xs:12},r.a.createElement(U,{open:o,closeDialog:this.closeDialog})),r.a.createElement(g.a,{item:!0,xs:12},r.a.createElement(C.a,{className:"taskInput",value:n,name:"timerName",onChange:this.onChangeName})),r.a.createElement(g.a,{item:!0,xs:12},r.a.createElement(_,{started:t,duration:a})),r.a.createElement(g.a,{item:!0,xs:12},this.renderButton(t)))}}]),t}(n.Component),me=Object(l.b)(function(e){return{timer:e.timer}},function(e){return{changeName:function(t){return e(function(e){return{type:q,payload:e}}(t))},addToLog:function(t){return e({type:Q,payload:t})},createItem:function(t){return e(function(e){return{type:Y,payload:e}}(t))}}})(Object(O.withStyles)(y)(se)),ue=a(215),de=a.n(ue),fe=a(217),pe=a.n(fe),ge=a(35),he=a.n(ge),ve=a(216),Ee=a.n(ve),be=a(138),Oe=a.n(be),ye=function(e){function t(){var e,a;Object(S.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(k.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(r)))).destroy=function(e){return function(){(0,a.props.deleteFromLog)(e)}},a}return Object(I.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.list;return r.a.createElement(r.a.Fragment,null,r.a.createElement(de.a,null,r.a.createElement(Ee.a,null,r.a.createElement(Oe.a,null,r.a.createElement(he.a,{align:"center"},"\u2116"),r.a.createElement(he.a,{align:"center"},"Task"),r.a.createElement(he.a,{align:"center"},"Time Start"),r.a.createElement(he.a,{align:"center"},"Time End"),r.a.createElement(he.a,{align:"center"},"Time Spend"),r.a.createElement(he.a,{align:"center"},"Info"),r.a.createElement(he.a,{align:"center"},"Delete"))),r.a.createElement(pe.a,null,n.map(function(t){return r.a.createElement(Oe.a,{className:a.logRow,key:t.id},r.a.createElement(he.a,{className:a.logCell},t.id),r.a.createElement(he.a,{className:a.logCell},t.name),r.a.createElement(he.a,{className:a.logCell},N.DateTime.fromISO(t.start).toFormat("HH:mm:ss")),r.a.createElement(he.a,{className:a.logCell},N.DateTime.fromISO(t.end).toFormat("HH:mm:ss")),r.a.createElement(he.a,{className:a.logCell},N.DateTime.fromObject(t.duration).toFormat("HH:mm:ss")),r.a.createElement(he.a,{className:a.logCell},r.a.createElement(x.a,{className:a.button,variant:"contained",component:f.a,to:"/tasks/".concat(t.id)},"Info")),r.a.createElement(he.a,{align:"center"},r.a.createElement(x.a,{className:a.button,variant:"contained",size:"small",onClick:e.destroy(t.id)},"Delete")))}))))}}]),t}(n.PureComponent),Se=Object(l.b)(function(e){return{list:e.timer.list}},function(e){return{deleteFromLog:function(t){return e({type:V,payload:t})}}})(Object(O.withStyles)(y)(ye)),je=a(534),ke=a(537),Te=a(499),Ie=a(500),Ne=a(535),we=a(530),Ce=a(112),De=function(e){function t(){var e,a;Object(S.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(k.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(r)))).generateEvents=function(){var e=a.props,t=e.createLog;(0,e.clearLog)();for(var n=N.DateTime.fromObject({hour:oe}),r=[],o=1;o<le(Z,ee);o+=1){var i=le(ne,re),l=le(te,ae),c=n.plus({minutes:i}),s=c.plus({minutes:l});n=n.plus({minutes:l+i});var m={id:o,name:"item".concat(o),start:c.toISO(),end:s.toISO(),duration:s.diff(c,["hours","minutes","seconds"]).toObject()};r.push(m)}t(r)},a}return Object(I.a)(t,e),Object(j.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.list;return r.a.createElement(n.Fragment,null,r.a.createElement(je.a,{width:"100%",height:300},r.a.createElement(ke.a,{data:ce(a),margin:{top:20,right:30,left:0,bottom:0}},r.a.createElement(Te.a,{dataKey:"hour"}),r.a.createElement(Ie.a,null),r.a.createElement(Ne.a,null),r.a.createElement(we.a,{type:"monotone",dataKey:"value",name:"Minutes in this hours",fill:"#3248C7",barSize:30}),r.a.createElement(Ce.a,{verticalAlign:"bottom"}))),r.a.createElement(g.a,{container:!0},r.a.createElement(g.a,{item:!0,xs:12,className:t.chartButtonContainer},r.a.createElement(x.a,{variant:"contained",size:"small",className:t.button,onClick:this.generateEvents},"Generate"))))}}]),t}(n.Component),xe=Object(l.b)(function(e){return{list:e.timer.list}},function(e){return{createLog:function(t){return e(function(e){return{type:$,payload:e}}(t))},clearLog:function(){return e({type:X})}}})(Object(O.withStyles)(y)(De)),Ae=Object(O.withStyles)(y)(function(e){var t=e.classes,a=function(e){var t=e.match.params.tab;return void 0===t?"log":t}(e);return r.a.createElement(n.Fragment,null,r.a.createElement(me,null),r.a.createElement(g.a,{container:!0,spacing:8,justify:"center",className:t.mainContainer},r.a.createElement(g.a,{item:!0,lg:1}),r.a.createElement(g.a,{item:!0,lg:9,md:12,xs:12},r.a.createElement(v.a,{value:a,className:t.mainTabList,variant:"fullWidth"},r.a.createElement(b.a,{className:t.mainTab,label:"Tasks log",value:"log",component:f.a,to:"/log"}),r.a.createElement(b.a,{className:t.mainTab,label:"Tasks chart",value:"chart",component:f.a,to:"/chart"})),function(e){switch(e){case"log":return r.a.createElement(Se,null);case"chart":return r.a.createElement(xe,null);default:return""}}(a)),r.a.createElement(g.a,{item:!0,lg:1})))}),Fe=a(538),Le=a(231),_e=a.n(Le),Me=a(232),Be=a.n(Me),Je=a(235),He=a.n(Je),Ge=a(234),Re=a.n(Ge),We=a(233),Ke=a.n(We),Pe=a(143),ze=a.n(Pe),Ue=a(60),Ye=a.n(Ue),$e=a(230),qe=a.n($e),Qe="GET_TASK",Ve="GET_TASK_LOADING",Xe="GET_TASK_SUCCESS",Ze="GET_TASK_FAILED",et="CLEAR_TASK";var tt=function(e){function t(){return Object(S.a)(this,t),Object(k.a)(this,Object(T.a)(t).apply(this,arguments))}return Object(I.a)(t,e),Object(j.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.match,a=e.getTask;t.params.id&&a(t.params.id)}},{key:"componentWillUnmount",value:function(){(0,this.props.clearTask)()}},{key:"renderInfo",value:function(){var e=this.props,t=e.task,a=e.classes,n=t.item;return t.loading?r.a.createElement("div",{className:a.infoPreloader},r.a.createElement("img",{src:qe.a,alt:"",height:100})):t.success?r.a.createElement(_e.a,{className:a.infoCard},r.a.createElement(Be.a,null,r.a.createElement(Ke.a,{title:n.name,align:"center"}),r.a.createElement(ze.a,null),r.a.createElement(Re.a,null,r.a.createElement(Ye.a,{variant:"h6",component:"h5"},"ID: ",n.id),r.a.createElement(Ye.a,{variant:"h6",component:"h5"},"Start: ",N.DateTime.fromISO(n.start).toFormat("HH:mm:ss")),r.a.createElement(Ye.a,{variant:"h6",component:"h5"},"End: ",N.DateTime.fromISO(n.end).toFormat("HH:mm:ss")),r.a.createElement(Ye.a,{variant:"h6",component:"h5"},"Duration:"," ",N.DateTime.fromObject(n.duration||{}).toFormat("HH:mm:ss"))),r.a.createElement(ze.a,null)),r.a.createElement(He.a,{className:a.infoFooter},r.a.createElement(x.a,{className:a.button,variant:"contained",component:f.a,to:"/log"},"Back"))):r.a.createElement(Fe.a,{to:"/404"})}},{key:"render",value:function(){return r.a.createElement(g.a,{container:!0,justify:"center"},this.renderInfo())}}]),t}(n.PureComponent),at=Object(l.b)(function(e){return{task:e.task}},function(e){return{getTask:function(t){return e(function(e){return{type:Qe,payload:e}}(t))},clearTask:function(){return e({type:et})}}})(Object(O.withStyles)(y)(tt)),nt=Object(O.withStyles)(y)(function(e){var t=e.classes;return r.a.createElement("div",{align:"center"},r.a.createElement("h2",null,"404 - Not found"),r.a.createElement(x.a,{className:t.button,variant:"contained",component:f.a,to:"/log"},"Back"))}),rt=function(){return r.a.createElement(u.a,null,r.a.createElement(d.a,{exact:!0,path:"/404",component:nt}),r.a.createElement(d.a,{path:"/tasks/:id",component:at}),r.a.createElement(d.a,{path:"/:tab?",component:Ae}))},ot=a(41),it=a(238),lt=a(236),ct=function(){return function(){return function(e){return function(t){if(t.type)switch(t.type){case Y:localStorage.setItem("item",JSON.stringify(t.payload));break;case $:localStorage.setItem("list",JSON.stringify(t.payload));break;case Q:var a=JSON.parse(localStorage.getItem("list"))||[];a.push(t.payload),localStorage.removeItem("item"),localStorage.removeItem("name"),localStorage.setItem("list",JSON.stringify(a));break;case V:var n=JSON.parse(localStorage.getItem("list"));n&&(n=n.filter(function(e){return e.id!==t.payload}),localStorage.setItem("list",JSON.stringify(n)));break;case q:var r=JSON.parse(localStorage.getItem("item"));r&&(r.name=t.payload,localStorage.setItem("item",JSON.stringify(r))),localStorage.setItem("name",t.payload||"");break;case X:localStorage.removeItem("list")}return e(t)}}}},st=a(237),mt=a(113),ut={item:{id:0,name:"",start:null,end:null,duration:null},list:[]};var dt={loading:!0,success:!1,failed:!1,item:{id:0,name:null,start:null,end:null,duration:null}};var ft=Object(ot.combineReducers)({timer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Y:return{item:t.payload,list:e.list};case $:return{item:e.item,list:t.payload};case q:return{item:Object(mt.a)({},e.item,{name:t.payload}),list:e.list};case Q:return{item:ut.item,list:[].concat(Object(st.a)(e.list),[t.payload])};case V:return{item:e.item,list:e.list.filter(function(e){return e.id!==t.payload})};case X:return{item:e.item,list:ut.list};default:return e}},task:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ve:return Object(mt.a)({},e,{loading:!0});case Xe:return{loading:!1,success:!0,failed:!1,item:t.payload};case Ze:return{loading:!1,success:!1,failed:!0,item:t.payload};case et:return dt;default:return e}}}),pt=a(63),gt=a.n(pt),ht=a(50),vt=gt.a.mark(yt),Et=gt.a.mark(St),bt=function(e){return new Promise(function(t){return setTimeout(t,e)})},Ot=function(e){return e.timer.list};function yt(e){var t,a;return gt.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(ht.b)(bt,1e3);case 3:return n.next=5,Object(ht.e)(Ot);case 5:if(t=n.sent,!(a=t.find(function(t){return t.id===+e.payload}))){n.next=12;break}return n.next=10,Object(ht.d)({type:Xe,payload:a});case 10:n.next=13;break;case 12:throw new Error("404");case 13:n.next=19;break;case 15:return n.prev=15,n.t0=n.catch(0),n.next=19,Object(ht.d)({type:Ze,payload:n.t0});case 19:case"end":return n.stop()}},vt,this,[[0,15]])}function St(){return gt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ht.a)([Object(ht.f)(Qe,yt)]);case 2:case"end":return e.stop()}},Et,this)}var jt=gt.a.mark(kt);function kt(){return gt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ht.a)([Object(ht.c)(St)]);case 2:case"end":return e.stop()}},jt,this)}a(527);var Tt=function(){var e={timer:{item:{id:0,name:"",start:null,end:null,duration:null},list:[]}};try{var t=JSON.parse(localStorage.getItem("item"));if(t){var a=N.DateTime.fromISO(t.start).diffNow("millisecond");e.timer.item={id:t.id,name:localStorage.getItem("name")||"",start:t.start,duration:Math.abs(a.valueOf())}}var n=JSON.parse(localStorage.getItem("list"))||[];return e.timer.list=n.map(function(e){return{id:e.id,name:e.name,start:e.start,end:e.end,duration:e.duration}}),e}catch(r){return console.error("startup",r),e}};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var It=function(){var e=Object(it.a)(),t=Tt(),a=Object(ot.createStore)(ft,t,Object(lt.composeWithDevTools)(Object(ot.applyMiddleware)(ct(),e)));return e.run(kt),a}(),Nt=m()({basename:"/timer-react"});i.a.render(r.a.createElement(l.a,{store:It},r.a.createElement(c.a,{history:Nt},r.a.createElement(rt,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[239,2,1]]]);
//# sourceMappingURL=main.64239da2.chunk.js.map