(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{231:function(e,t,a){e.exports=a.p+"static/media/ring.4d1881e7.svg"},239:function(e,t,a){e.exports=a(529)},253:function(e,t,a){},529:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(59),i=a.n(o);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var l=a(53),c=a(45),s=a(238),m=a(536),u=a(207),d=a.n(u),p=a(20),f=a(208),h="CREATE_ITEM",g="CREATE_LOG",b="ITEM_SET_NAME",v="ADD_TO_LOG",E="DELETE_FROM_LOG",O="CLEAR_LOG";var y=a(237),j=a(113),S={item:{id:0,name:"",start:null,end:null,duration:null},list:[]};var k="GET_TASK",T="GET_TASK_LOADING",I="GET_TASK_SUCCESS",C="GET_TASK_FAILED",N="CLEAR_TASK";var w={loading:!0,success:!1,failed:!1,item:{id:0,name:null,start:null,end:null,duration:null}};var D=Object(l.combineReducers)({timer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return{item:t.payload,list:e.list};case g:return{item:e.item,list:t.payload};case b:return{item:Object(j.a)({},e.item,{name:t.payload}),list:e.list};case v:return{item:S.item,list:[].concat(Object(y.a)(e.list),[t.payload])};case E:return{item:e.item,list:e.list.filter(function(e){return e.id!==t.payload})};case O:return{item:e.item,list:S.list};default:return e}},task:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:return Object(j.a)({},e,{loading:!0});case I:return{loading:!1,success:!0,failed:!1,item:t.payload};case C:return{loading:!1,success:!1,failed:!0,item:t.payload};case N:return w;default:return e}}}),x=a(66),A=a.n(x),F=a(51),L=A.a.mark(J),_=A.a.mark(H),M=function(e){return new Promise(function(t){return setTimeout(t,e)})},B=function(e){return e.timer.list};function J(e){var t,a;return A.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(F.b)(M,1e3);case 3:return n.next=5,Object(F.e)(B);case 5:if(t=n.sent,!(a=t.find(function(t){return t.id===+e.payload}))){n.next=12;break}return n.next=10,Object(F.d)({type:I,payload:a});case 10:n.next=14;break;case 12:return n.next=14,Object(F.d)({type:C,payload:404});case 14:n.next=20;break;case 16:return n.prev=16,n.t0=n.catch(0),n.next=20,Object(F.d)({type:C,payload:n.t0});case 20:case"end":return n.stop()}},L,this,[[0,16]])}function H(){return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(F.a)([Object(F.f)(k,J)]);case 2:case"end":return e.stop()}},_,this)}var G=A.a.mark(R);function R(){return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(F.a)([Object(F.c)(H)]);case 2:case"end":return e.stop()}},G,this)}a(253);var W=a(31),K=a(32),P=a(34),z=a(33),U=a(35),Y=a(539),$=a(540),q=a(533),Q=a(38),V=a.n(Q),X=a(230),Z=a.n(X),ee=a(142),te=a.n(ee),ae=a(37),ne={button:{background:"#fff",color:"#3f51b5",padding:"5px"},mainContainer:{width:"100%",paddingRight:"15px",paddingLeft:"15px",marginRight:"auto",marginLeft:"auto"},mainTabList:{flexGrow:1,backgroundColor:"#02BCD4",width:"100%",color:"#fff"},mainTab:{fontWeight:600,fontSize:"small"},timerClock:{background:"#fff",color:"#3f51b5",fontWeight:900,fontSize:"x-large",padding:"65px 80px 90px",margin:"20px"},taskWrapper:{margin:"10px 0 25px 0",textAlign:"center"},infoCard:{marginTop:20,textAlign:"left"},infoFooter:{justifyContent:"center"},logRow:{background:"#EAF6FF"},logCell:{textAlign:"center",paddingTop:"10px",paddingBottom:"10px",color:"#3f51b5"},chartButtonContainer:{textAlign:"right",marginBottom:30},dialogTitle:{color:"#ff0000"},dialogButton:{color:"#0EBFD7"},infoPreloader:{marginTop:50}},re=a(215),oe=a.n(re),ie=a(39),le=a.n(ie),ce=a(209),se=a.n(ce),me=function(e){function t(e){var a;return Object(W.a)(this,t),(a=Object(P.a)(this,Object(z.a)(t).call(this,e))).state={time:null},a.state={time:p.Duration.fromMillis(e.duration?e.duration:0),intervalId:null},a}return Object(U.a)(t,e),Object(K.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.started;this.runner(e)}},{key:"componentDidUpdate",value:function(e){var t=this.props.started;t!==e.started&&this.runner(t)}},{key:"componentWillUnmount",value:function(){var e=this.state.intervalId;clearInterval(e)}},{key:"runner",value:function(e){var t=this,a=this.state.intervalId;if(e){var n=setInterval(function(){t.addSecond()},1e3);this.setState({intervalId:n})}else clearInterval(a),this.setState({time:p.Duration.fromMillis(0)})}},{key:"addSecond",value:function(){var e=this.state.time;this.setState({time:e.plus(p.Duration.fromMillis(1e3))})}},{key:"render",value:function(){var e=this.state.time,t=this.props.classes;return r.a.createElement(se.a,{variant:"round",className:t.timerClock},e.toFormat("hh:mm:ss"))}}]),t}(n.PureComponent),ue=Object(ae.withStyles)(ne)(me),de=a(210),pe=a.n(de),fe=a(214),he=a.n(fe),ge=a(212),be=a.n(ge),ve=a(213),Ee=a.n(ve),Oe=a(211),ye=a.n(Oe),je=function(e){function t(){return Object(W.a)(this,t),Object(P.a)(this,Object(z.a)(t).apply(this,arguments))}return Object(U.a)(t,e),Object(K.a)(t,[{key:"render",value:function(){var e=this.props,t=e.open,a=e.closeDialog,n=e.classes;return r.a.createElement(pe.a,{open:t,onClose:a(),"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(ye.a,{id:"alert-dialog-title",disableTypography:!0},r.a.createElement("h2",{className:n.dialogTitle},"Empty task name")),r.a.createElement(be.a,null,r.a.createElement(Ee.a,{id:"alert-dialog-description"},"You are trying close your task without name, enter the title and try again!")),r.a.createElement(he.a,null,r.a.createElement(le.a,{onClick:a(),className:n.dialogButton,autoFocus:!0},"Close")))}}]),t}(n.Component),Se=Object(ae.withStyles)(ne)(je),ke=10,Te=15,Ie=10,Ce=90,Ne=10,we=50,De=4,xe=function(){var e=JSON.parse(localStorage.getItem("list")),t=1;return e&&(e.sort(function(e,t){return e.id-t.id}),t=++e.pop().id),t},Ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;return Math.floor(Math.random()*(t-e)+e+1)},Fe=function(e){for(var t=e.map(function(e){var t=p.DateTime.fromISO(e.start),a=p.DateTime.fromISO(e.end);return{id:e.id,interval:p.Interval.fromDateTimes(t,a),start:t,end:a}}),a=[],n=function(e){var n=0,r=p.DateTime.fromObject({hour:e,minute:0,second:0}),o=p.DateTime.fromObject({hour:e,minute:59,second:59}),i=p.Interval.fromDateTimes(r,o),l=t.filter(function(e){return i.intersection(e.interval)});if(l.length>0){var c=60;l.forEach(function(t){t.end.hour===e&&t.start.hour===e?c=t.end.diff(t.start,["minutes"]).toObject().minutes:t.end.hour===e?c=t.end.minute:t.start.hour===e&&(c=60-t.start.minute),n+=c})}a.push({hour:e,value:n>60?60:n})},r=0;r<=23;r++)n(r);return a},Le=function(e){function t(e){var a;Object(W.a)(this,t),(a=Object(P.a)(this,Object(z.a)(t).call(this))).state={name:"",started:!1,duration:0,dialog:!1},a.onChangeName=function(e){var t=a.props.changeName;a.setState({name:e.target.value}),t(e.target.value)},a.onStartClick=function(){var e=a.state.name,t=a.props.createItem;a.setState({started:!0}),t({id:xe(),start:p.DateTime.local().toISO(),name:e,end:null,duration:null})},a.onStopClick=function(){var e=a.state.name,t=a.props,n=t.addToLog,r=t.timer.item;if(e){a.setState({started:!1,name:""});var o=p.DateTime.local();n({id:r.id,name:e,start:r.start,end:o.toISO(),duration:o.diff(p.DateTime.fromISO(r.start),["hours","minutes","seconds"]).toObject()})}else a.openDialog()},a.closeDialog=function(){return function(){a.setState({dialog:!1})}},a.openDialog=function(){a.setState({dialog:!0})},a.renderButton=function(e){var t=a.props.classes;return r.a.createElement(le.a,{className:t.button,variant:"contained",size:"small",onClick:e?a.onStopClick:a.onStartClick},e?"Stop":"Start")};var n=e.timer.item;if(n&&0!==n.id){var o=p.DateTime.fromISO(n.start).diffNow("millisecond");a.state={started:!0,duration:Math.abs(o.valueOf()),name:n.name,dialog:!1}}return a}return Object(U.a)(t,e),Object(K.a)(t,[{key:"render",value:function(){var e=this.state,t=e.started,a=e.duration,n=e.name,o=e.dialog,i=this.props.classes;return r.a.createElement(V.a,{container:!0,spacing:8,justify:"center",className:i.taskWrapper},r.a.createElement(V.a,{item:!0,xs:12},r.a.createElement(Se,{open:o,closeDialog:this.closeDialog})),r.a.createElement(V.a,{item:!0,xs:12},r.a.createElement(oe.a,{className:"taskInput",value:n,name:"timerName",onChange:this.onChangeName})),r.a.createElement(V.a,{item:!0,xs:12},r.a.createElement(ue,{started:t,duration:a})),r.a.createElement(V.a,{item:!0,xs:12},this.renderButton(t)))}}]),t}(n.Component),_e=Object(c.b)(function(e){return{timer:e.timer}},function(e){return{changeName:function(t){return e(function(e){return{type:b,payload:e}}(t))},addToLog:function(t){return e({type:v,payload:t})},createItem:function(t){return e(function(e){return{type:h,payload:e}}(t))}}})(Object(ae.withStyles)(ne)(Le)),Me=a(216),Be=a.n(Me),Je=a(218),He=a.n(Je),Ge=a(40),Re=a.n(Ge),We=a(217),Ke=a.n(We),Pe=a(138),ze=a.n(Pe),Ue=function(e){function t(){var e,a;Object(W.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(P.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(r)))).destroy=function(e){return function(){(0,a.props.deleteFromLog)(e)}},a}return Object(U.a)(t,e),Object(K.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.list;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Be.a,null,r.a.createElement(Ke.a,null,r.a.createElement(ze.a,null,r.a.createElement(Re.a,{align:"center"},"\u2116"),r.a.createElement(Re.a,{align:"center"},"Task"),r.a.createElement(Re.a,{align:"center"},"Time Start"),r.a.createElement(Re.a,{align:"center"},"Time End"),r.a.createElement(Re.a,{align:"center"},"Time Spend"),r.a.createElement(Re.a,{align:"center"},"Info"),r.a.createElement(Re.a,{align:"center"},"Delete"))),r.a.createElement(He.a,null,n.map(function(t){return r.a.createElement(ze.a,{className:a.logRow,key:t.id},r.a.createElement(Re.a,{className:a.logCell},t.id),r.a.createElement(Re.a,{className:a.logCell},t.name),r.a.createElement(Re.a,{className:a.logCell},p.DateTime.fromISO(t.start).toFormat("HH:mm:ss")),r.a.createElement(Re.a,{className:a.logCell},p.DateTime.fromISO(t.end).toFormat("HH:mm:ss")),r.a.createElement(Re.a,{className:a.logCell},p.DateTime.fromObject(t.duration).toFormat("HH:mm:ss")),r.a.createElement(Re.a,{className:a.logCell},r.a.createElement(le.a,{className:a.button,variant:"contained",component:q.a,to:"/tasks/".concat(t.id)},"Info")),r.a.createElement(Re.a,{align:"center"},r.a.createElement(le.a,{className:a.button,variant:"contained",size:"small",onClick:e.destroy(t.id)},"Delete")))}))))}}]),t}(n.PureComponent),Ye=Object(c.b)(function(e){return{list:e.timer.list}},function(e){return{deleteFromLog:function(t){return e({type:E,payload:t})}}})(Object(ae.withStyles)(ne)(Ue)),$e=a(534),qe=a(537),Qe=a(503),Ve=a(504),Xe=a(535),Ze=a(530),et=a(50),tt=function(e){function t(){var e,a;Object(W.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(P.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(r)))).generateEvents=function(){var e=a.props,t=e.createLog;(0,e.clearLog)();for(var n=p.DateTime.fromObject({hour:De}),r=[],o=1;o<Ae(ke,Te);o++){var i=Ae(Ne,we),l=Ae(Ie,Ce),c=n.plus({minutes:i}),s=c.plus({minutes:l});n=n.plus({minutes:l+i});var m={id:o,name:"item".concat(o),start:c.toISO(),end:s.toISO(),duration:s.diff(c,["hours","minutes","seconds"]).toObject()};r.push(m)}t(r)},a}return Object(U.a)(t,e),Object(K.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.list;return r.a.createElement(n.Fragment,null,r.a.createElement($e.a,{width:"100%",height:300},r.a.createElement(qe.a,{data:Fe(a),margin:{top:20,right:30,left:0,bottom:0}},">",r.a.createElement(Qe.a,{dataKey:"hour"}),r.a.createElement(Ve.a,null),r.a.createElement(Xe.a,null),r.a.createElement(Ze.a,{type:"monotone",dataKey:"value",name:"Minutes in this hours",fill:"#3248C7",barSize:30}),r.a.createElement(et.a,{verticalAlign:"bottom"}))),r.a.createElement(V.a,{container:!0},r.a.createElement(V.a,{item:!0,xs:12,className:t.chartButtonContainer},r.a.createElement(le.a,{variant:"contained",size:"small",className:t.button,onClick:this.generateEvents},"Generate"))))}}]),t}(n.Component),at=Object(c.b)(function(e){return{list:e.timer.list}},function(e){return{createLog:function(t){return e(function(e){return{type:g,payload:e}}(t))},clearLog:function(){return e({type:O})}}})(Object(ae.withStyles)(ne)(tt)),nt=function(e){function t(){var e,a;Object(W.a)(this,t);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return(a=Object(P.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(o)))).getCurrentTab=function(){var e=a.props.match.params.tab;return void 0===e?"log":e},a.renderTab=function(){switch(a.getCurrentTab()){case"log":return r.a.createElement(Ye,null);case"chart":return r.a.createElement(at,null);default:return""}},a}return Object(U.a)(t,e),Object(K.a)(t,[{key:"render",value:function(){var e=this.props.classes,t=this.getCurrentTab();return r.a.createElement(n.Fragment,null,r.a.createElement(_e,null),r.a.createElement(V.a,{container:!0,spacing:8,justify:"center",className:e.mainContainer},r.a.createElement(V.a,{item:!0,lg:1}),r.a.createElement(V.a,{item:!0,lg:9,md:12,xs:12},r.a.createElement(Z.a,{value:t,className:e.mainTabList,variant:"fullWidth"},r.a.createElement(te.a,{className:e.mainTab,label:"Tasks log",value:"log",component:q.a,to:"/log"}),r.a.createElement(te.a,{className:e.mainTab,label:"Tasks chart",value:"chart",component:q.a,to:"/chart"})),this.renderTab()),r.a.createElement(V.a,{item:!0,lg:1})))}}]),t}(n.Component),rt=Object(ae.withStyles)(ne)(nt),ot=a(538),it=a(232),lt=a.n(it),ct=a(233),st=a.n(ct),mt=a(236),ut=a.n(mt),dt=a(235),pt=a.n(dt),ft=a(234),ht=a.n(ft),gt=a(143),bt=a.n(gt),vt=a(65),Et=a.n(vt),Ot=a(231),yt=a.n(Ot),jt=function(e){function t(){return Object(W.a)(this,t),Object(P.a)(this,Object(z.a)(t).apply(this,arguments))}return Object(U.a)(t,e),Object(K.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.match,a=e.getTask;t.params.id&&a(t.params.id)}},{key:"componentWillUnmount",value:function(){(0,this.props.clearTask)()}},{key:"renderInfo",value:function(){var e=this.props,t=e.task,a=e.classes,n=t.item;return t.loading?r.a.createElement("div",{className:a.infoPreloader},r.a.createElement("img",{src:yt.a,alt:"",height:100})):t.failed&&404===n?r.a.createElement(ot.a,{to:"/404"}):t.success?r.a.createElement(lt.a,{className:a.infoCard},r.a.createElement(st.a,null,r.a.createElement(ht.a,{title:n.name,align:"center"}),r.a.createElement(bt.a,null),r.a.createElement(pt.a,null,r.a.createElement(r.a.Fragment,null,r.a.createElement(Et.a,{variant:"h6",component:"h5"},"ID: ",n.id),r.a.createElement(Et.a,{variant:"h6",component:"h5"},"Start: ",p.DateTime.fromISO(n.start).toFormat("HH:mm:ss")),r.a.createElement(Et.a,{variant:"h6",component:"h5"},"End: ",p.DateTime.fromISO(n.end).toFormat("HH:mm:ss")),r.a.createElement(Et.a,{variant:"h6",component:"h5"},"Duration: ",p.DateTime.fromObject(n.duration||{}).toFormat("HH:mm:ss")))),r.a.createElement(bt.a,null)),r.a.createElement(ut.a,{className:a.infoFooter},r.a.createElement(le.a,{className:a.button,variant:"contained",component:q.a,to:"/log"},"Back"))):void 0}},{key:"render",value:function(){return r.a.createElement(V.a,{container:!0,justify:"center"},this.renderInfo())}}]),t}(n.PureComponent),St=Object(c.b)(function(e){return{task:e.task}},function(e){return{getTask:function(t){return e(function(e){return{type:k,payload:e}}(t))},clearTask:function(){return e({type:N})}}})(Object(ae.withStyles)(ne)(jt)),kt=function(e){function t(){return Object(W.a)(this,t),Object(P.a)(this,Object(z.a)(t).apply(this,arguments))}return Object(U.a)(t,e),Object(K.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement("div",{align:"center"},r.a.createElement("h2",null,"404 - Not found"),r.a.createElement(le.a,{className:e.button,variant:"contained",component:q.a,to:"/log"},"Back"))}}]),t}(n.PureComponent),Tt=Object(ae.withStyles)(ne)(kt),It=function(e){function t(){return Object(W.a)(this,t),Object(P.a)(this,Object(z.a)(t).apply(this,arguments))}return Object(U.a)(t,e),Object(K.a)(t,[{key:"render",value:function(){return console.log("/timer-react"),r.a.createElement(Y.a,null,r.a.createElement($.a,{exact:!0,path:"/404",component:Tt}),r.a.createElement($.a,{path:"/tasks/:id",component:St}),r.a.createElement($.a,{path:"/:tab?",component:rt}))}}]),t}(n.Component),Ct=Object(s.a)(),Nt=function(){var e={timer:{item:{id:0,name:"",start:null,end:null,duration:null},list:[]}};try{var t=JSON.parse(localStorage.getItem("item"));if(t){var a=p.DateTime.fromISO(t.start).diffNow("millisecond");e.timer.item={id:t.id,name:localStorage.getItem("name")||"",start:t.start,duration:Math.abs(a.valueOf())}}var n=JSON.parse(localStorage.getItem("list"))||[];return e.timer.list=n.map(function(e){return{id:e.id,name:e.name,start:e.start,end:e.end,duration:e.duration}}),e}catch(r){console.error("startup",r)}}(),wt=Object(l.createStore)(D,Nt,Object(f.composeWithDevTools)(Object(l.applyMiddleware)(function(){return function(e){return function(t){if(t.type)switch(t.type){case h:localStorage.setItem("item",JSON.stringify(t.payload));break;case g:localStorage.setItem("list",JSON.stringify(t.payload));break;case v:var a=JSON.parse(localStorage.getItem("list"))||[];a.push(t.payload),localStorage.removeItem("item"),localStorage.removeItem("name"),localStorage.setItem("list",JSON.stringify(a));break;case E:var n=JSON.parse(localStorage.getItem("list"));n&&(n=n.filter(function(e){return e.id!==t.payload}),localStorage.setItem("list",JSON.stringify(n)));break;case b:var r=JSON.parse(localStorage.getItem("item"));r&&(r.name=t.payload,localStorage.setItem("item",JSON.stringify(r))),localStorage.setItem("name",t.payload||"");break;case O:localStorage.removeItem("list")}return e(t)}}},Ct)));Ct.run(R);var Dt=d()({basename:"/timer-react"});i.a.render(r.a.createElement(c.a,{store:wt},r.a.createElement(m.a,{history:Dt},r.a.createElement(It,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[239,2,1]]]);
//# sourceMappingURL=main.5e16029d.chunk.js.map